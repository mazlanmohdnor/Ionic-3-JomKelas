{"version":3,"sources":["../../src/pages/verifymail/verifymail.module.ts","../../src/pages/verifymail/verifymail.ts"],"names":[],"mappings":"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","file":"1.js","sourcesContent":["import { NgModule } from '@angular/core';\nimport { IonicPageModule } from 'ionic-angular';\nimport { VerifymailPage } from './verifymail';\n\n@NgModule({\n  declarations: [\n    VerifymailPage,\n  ],\n  imports: [\n    IonicPageModule.forChild(VerifymailPage),\n  ],\n})\nexport class VerifymailPageModule {}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/verifymail/verifymail.module.ts","import { AngularFireAuth } from 'angularfire2/auth';\nimport { InAppBrowser } from '@ionic-native/in-app-browser';\nimport { Component } from '@angular/core';\nimport { IonicPage, NavController, NavParams, AlertController, LoadingController } from 'ionic-angular';\n\n\n\n@IonicPage()\n@Component({\n  selector: 'page-verifymail',\n  templateUrl: 'verifymail.html',\n})\nexport class VerifymailPage {\n  matric: any;\n  phone: string;\n  photoURL: string;\n  email: string;\n  displayName: string;\n  constructor(\n    public navCtrl: NavController,\n    public navParams: NavParams,\n    public iab: InAppBrowser,\n    public firebase: AngularFireAuth,\n    public alertCtrl: AlertController,\n    public loadingCtrl: LoadingController,\n\n  ) {\n    // this.profile.email = this.navParams.get('email');\n    this.matric=this.firebase.auth.currentUser.email;\n  }\n\n\n\n\n  // navigate to upm email login page\n  navigateEmail() {\n   \n    let browser = open('http://mail.student.upm.edu.my/', \"_self\", \"location=true\");\n    let loader = this.loadingCtrl.create({\n      content: \"Validating...\",\n    });\n    browser.addEventListener('exit', () => {\n      loader.present();\n      this.firebase.auth.onAuthStateChanged((user) => {\n        //if user x logged in, set page ke login\n        user.reload().then(() => {\n          if (this.firebase.auth.currentUser.emailVerified) {\n            this.navCtrl.setRoot('HomePage').then(() => loader.dismiss());\n          } else {\n            this.navCtrl.setRoot('VerifymailPage').then(() => loader.dismiss());\n          }\n        })\n      })\n      })\n    }\n  \n\n\n  //resend verification email\n  resendEmail() {\n    let loader = this.loadingCtrl.create({\n      content: \"Sending Email...\",\n    });\n    loader.present();\n    var email = this.matric;\n    this.firebase.auth.currentUser.sendEmailVerification().then(() => {\n          //success\n\n          let alert = this.alertCtrl.create({\n            title: 'Email sent',\n            subTitle: 'Please check your email at ' + email,\n            buttons: [\n              {\n                text: 'OK',\n                role: 'cancel',\n                handler: () => {\n                  console.log('Cancel clicked');\n                }\n              },\n              {\n                text: 'Check Email',\n                handler: () => {\n                  this.navigateEmail();\n                }\n              }\n            ]\n          });\n          loader.dismiss();\n          alert.present();\n        }, (error) => {\n          loader.dismiss();\n          let alert = this.alertCtrl.create({\n            title: 'Try again',\n            subTitle: error.message,\n            buttons: ['OK']\n          });\n          alert.present();\n        })\n  }\n\n  home() {\n    this.navCtrl.setRoot('LoginPage');\n  }\n\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/verifymail/verifymail.ts"],"sourceRoot":""}